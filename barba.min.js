function initBarba(){barba.init({schema:{prefix:"data-barba"},prevent:({el:e})=>{if(barbaLog("Prevent check",{el:e?.tagName,href:e?.href,dataBarbaLink:e?.getAttribute("data-barba-link"),isSamePage:window._barbaState.isSamePageTransition}),window.window.archiveTransitionInProgress&&(window.window.archiveTransitionInProgress=!1),e&&"seamless"===e.getAttribute("data-barba-link"))return isMobileOrTablet()?(barbaLog("Allowing seamless transition on mobile/tablet - will use opacity-crossfade"),!1):(barbaLog("Preventing seamless transition on desktop"),!0);if(e&&e.closest(".project-wrapper")){const a=e.closest(".project-wrapper");if(a.classList.contains("hide")||"none"===a.style.display||"hidden"===a.style.visibility)return barbaLog("Preventing transition - element is inside hidden project-wrapper"),!0}if(e&&e.href){const a=window.location.pathname,t=new URL(e.href,window.location.origin).pathname;if(a===t)return barbaLog("Preventing same page transition",{currentPath:a,linkPath:t}),window._barbaState.isSamePageTransition=!0,!0}return window._barbaState.isSamePageTransition?(barbaLog("Preventing due to global same page flag"),!0):(window._barbaState.isSamePageTransition||(window._barbaState.isSamePageTransition=!1),barbaLog("Allowing transition"),!1)},transitions:[{name:"fade-transition",sync:!0,custom:({trigger:e})=>{if(isMobileOrTablet())return!1;const a=e&&"fade"===e.getAttribute("data-barba-link"),t=window._barbaState.useFadeTransition;return a||t},beforeLeave:({current:e})=>(barbaLog("fade-transition beforeLeave",{container:!!e.container}),saveScrollTriggerState(e.container),window._oldContainer=e.container,gsap.killTweensOf(e.container),gsap.set(e.container,{zIndex:1})),leave:({current:e})=>{barbaLog("fade-transition leave");const a=gsap.timeline(),t=e.container.querySelector(".overlay"),n=e.container.querySelector('[data-out-reveal="out"]');a.to(e.container,{y:-250,opacity:.2,duration:1.1,ease:"power3.inOut"},0);return e.container.querySelectorAll(".next_page_visual, .divider_wrap, .info_wrapper, .info_divider").forEach(e=>{a.to(e,{y:0,duration:1.1,ease:"power3.inOut"},0)}),n&&"block"===n.style.display&&a.to(n,{y:0,opacity:1,duration:1.1,ease:"power3.inOut",force3D:!0,overwrite:"auto"},0),t&&a.to(t,{opacity:1,duration:.1,ease:"power3.inOut"},0),a},enter:({next:e})=>(barbaLog("fade-transition enter"),$(e.container).addClass("fixed"),updateTimezoneTime(),animatePageIntroForFade(e.container,window._barbaState.isSamePageTransition),initCaseSmoothScroll(e.container),initCaseScrollTriggers(e.container),initVisualSlider(e.container),initDropdown(e.container),initHomeSlider(e.container),initNav(e.container),initFieldFillerAnimation(e.container),initArchiveThumb(e.container),addDelayedLoadedClass(e.container,500),splitLinesAnimation(e.container,400),gsap.from(e.container,{zIndex:3,clipPath:"inset(100% 0% 0% 0%)",duration:1.1,ease:"expo.inOut",onComplete:function(){updateCurrentClass(),updatePage(),$(e.container).removeClass("fixed"),syncProjectClass(e.container);const a=e.container.querySelectorAll(".work_slide"),t=e.container.querySelectorAll(".work_thumb_wrap");a.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),t.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),setTimeout(()=>{a.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),t.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._oldContainer&&(cleanupCaseScrollFeatures(window._oldContainer),window._oldContainer=null),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,window._barbaState.useFadeTransition=!1,clearScrollTriggerState(),safeScrollTriggerRefresh(),barbaLog("fade-transition completed")}}))},{name:"opacity-crossfade",sync:!0,custom:({trigger:e})=>isMobileOrTablet()?(barbaLog("Using crossfade transition for mobile/tablet"),!0):window._barbaState.isBackNavigation?(barbaLog("Forcing crossfade transition for back navigation"),!0):window._barbaState.useFadeTransition?(barbaLog("Using crossfade transition for archive navigation"),!0):e&&"trans"===e.getAttribute("data-barba-link"),beforeLeave:({current:e})=>(barbaLog("opacity-crossfade beforeLeave"),cleanupCaseScrollFeatures(e.container),gsap.killTweensOf(e.container),gsap.set(e.container,{zIndex:1,opacity:1})),leave:({current:e})=>{barbaLog("opacity-crossfade leave");const a=isMobileOrTablet()?.5:.6;return gsap.to(e.container,{opacity:0,duration:a,ease:"power1.out"})},enter:({next:e})=>{barbaLog("opacity-crossfade enter"),$(e.container).addClass("fixed"),gsap.set(e.container,{zIndex:3,opacity:0}),updateTimezoneTime(),animatePageIntro(e.container,window._barbaState.isSamePageTransition),isMobileOrTablet()&&(addDelayedLoadedClass(e.container,500),splitLinesAnimation(e.container,400)),initCaseSmoothScroll(e.container),initCaseScrollTriggers(e.container),initVisualSlider(e.container),initDropdown(e.container),initHomeSlider(e.container),initNav(e.container),initFieldFillerAnimation(e.container),initArchiveThumb(e.container);const a=isMobileOrTablet()?.5:.6;return gsap.to(e.container,{opacity:1,duration:a,ease:"power1.out",onComplete:function(){updateCurrentClass(),updatePage(),$(e.container).removeClass("fixed"),syncProjectClass(e.container);const a=e.container.querySelectorAll(".work_slide"),t=e.container.querySelectorAll(".work_thumb_wrap");a.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),t.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),setTimeout(()=>{a.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),t.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,window._barbaState.isBackNavigation=!1,window._barbaState.useFadeTransition=!1,safeScrollTriggerRefresh(),barbaLog("opacity-crossfade completed")}})}},{name:"instant-transition",sync:!0,custom:({trigger:e})=>!isMobileOrTablet()&&(!e||"fade"!==e.getAttribute("data-barba-link")&&"seamless"!==e.getAttribute("data-barba-link")&&"trans"!==e.getAttribute("data-barba-link")),beforeLeave:({current:e})=>{barbaLog("instant-transition beforeLeave"),cleanupCaseScrollFeatures(e.container),gsap.killTweensOf(e.container)},enter:({next:e})=>{barbaLog("instant-transition enter"),updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(e.container,window._barbaState.isSamePageTransition),initCaseSmoothScroll(e.container),initCaseScrollTriggers(e.container),initVisualSlider(e.container),initDropdown(e.container),initHomeSlider(e.container),initNav(e.container),initFieldFillerAnimation(e.container),initArchiveThumb(e.container),syncProjectClass(e.container);const a=e.container.querySelectorAll(".work_slide"),t=e.container.querySelectorAll(".work_thumb_wrap");a.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),t.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),setTimeout(()=>{a.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),t.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,safeScrollTriggerRefresh(),barbaLog("instant-transition completed")}}]})}document.addEventListener("click",function(e){const a=e.target.closest('a[data-barba-link="seamless"]');if(!a)return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(a.target&&"_self"!==a.target)return;const t=window.location.pathname,n=new URL(a.href,window.location.origin).pathname;t!==n?(addToNavigationHistory(n),e.preventDefault(),e.stopPropagation(),isMobileOrTablet()?(barbaLog("Using opacity-crossfade for seamless transition on mobile/tablet"),window.barba&&"function"==typeof barba.go?barba.go(a.href,"opacity-crossfade"):window.location.href=a.href):animateLeaveAndGo(a.href)):window._barbaState.isSamePageTransition=!0},!0),document.addEventListener("click",function(e){const a=e.target.closest("a[href]");if(!a)return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(a.target&&"_self"!==a.target)return;const t=window.location.pathname,n=new URL(a.href,window.location.origin).pathname;if(t===n)return e.preventDefault(),e.stopPropagation(),window._barbaState.isSamePageTransition=!0,!1;a.getAttribute("data-barba-link")&&"seamless"===a.getAttribute("data-barba-link")||addToNavigationHistory(n)},!0);
