function initBarba(){barba.init({schema:{prefix:"data-barba"},prevent:({el:el})=>{if(barbaLog("Prevent check",{el:el?.tagName,href:el?.href,dataBarbaLink:el?.getAttribute("data-barba-link"),isSamePage:window._barbaState.isSamePageTransition}),window.window.archiveTransitionInProgress&&(window.window.archiveTransitionInProgress=!1),el&&"seamless"===el.getAttribute("data-barba-link")return isMobileOrTablet()?(barbaLog("Allowing seamless transition on mobile/tablet - will use opacity-crossfade"),!1):(barbaLog("Preventing seamless transition on desktop"),!0);if(el&&el.closest(".project-wrapper")){const projectWrapper=el.closest(".project-wrapper");if(projectWrapper.classList.contains("hide")||"none"===projectWrapper.style.display||"hidden"===projectWrapper.style.visibility)return barbaLog("Preventing transition - element is inside hidden project-wrapper"),!0}if(el&&el.href){const currentPath=window.location.pathname,linkPath=new URL(el.href,window.location.origin).pathname;if(currentPath===linkPath)return barbaLog("Preventing same page transition",{currentPath:currentPath,linkPath:linkPath}),window._barbaState.isSamePageTransition=!0,!0}return window._barbaState.isSamePageTransition?(barbaLog("Preventing due to global same page flag"),!0):(window._barbaState.isSamePageTransition||(window._barbaState.isSamePageTransition=!1),barbaLog("Allowing transition"),!1)},transitions:[{name:"fade-transition",sync:!0,custom:({trigger:trigger})=>{if(isMobileOrTablet())return!1;const isFadeLink=trigger&&"fade"===trigger.getAttribute("data-barba-link"),isProgrammaticFade=window._barbaState.useFadeTransition;return isFadeLink||isProgrammaticFade},beforeLeave:({current:current})=>(barbaLog("fade-transition beforeLeave",{container:!!current.container}),saveScrollTriggerState(current.container),window._oldContainer=current.container,gsap.killTweensOf(current.container),gsap.set(current.container,{zIndex:1})),leave:({current:current})=>{barbaLog("fade-transition leave");const tl=gsap.timeline(),overlay=current.container.querySelector(".overlay"),lightbox=current.container.querySelector('[data-out-reveal="out"]');tl.to(current.container,{y:-250,opacity:.2,duration:1.1,ease:"power3.inOut"},0);return current.container.querySelectorAll(".next_page_visual, .divider_wrap, .info_wrapper, .info_divider").forEach(element=>{tl.to(element,{y:0,duration:1.1,ease:"power3.inOut"},0)}),lightbox&&"block"===lightbox.style.display&&tl.to(lightbox,{y:0,opacity:1,duration:1.1,ease:"power3.inOut",force3D:!0,overwrite:"auto"},0),overlay&&tl.to(overlay,{opacity:1,duration:.1,ease:"power3.inOut"},0),tl},enter:({next:next})=>(barbaLog("fade-transition enter"),$(next.container).addClass("fixed"),updateTimezoneTime(),animatePageIntroForFade(next.container,window._barbaState.isSamePageTransition),initCaseSmoothScroll(next.container),initCaseScrollTriggers(next.container),initVisualSlider(next.container),initDropdown(next.container),initHomeSlider(next.container),initNav(next.container),initFieldFillerAnimation(next.container),initArchiveThumb(next.container),addDelayedLoadedClass(next.container,500),splitLinesAnimation(next.container,400),gsap.from(next.container,{zIndex:3,clipPath:"inset(100% 0% 0% 0%)",duration:1.1,ease:"expo.inOut",onComplete:function(){updateCurrentClass(),updatePage(),$(next.container).removeClass("fixed"),syncProjectClass(next.container);const workSlides=next.container.querySelectorAll(".work_slide"),workThumbWraps=next.container.querySelectorAll(".work_thumb_wrap");workSlides.forEach(slide=>{slide.style.pointerEvents="none",slide.style.cursor="default"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="none",thumb.style.cursor="default"}),setTimeout(()=>{workSlides.forEach(slide=>{slide.style.pointerEvents="auto",slide.style.cursor="pointer"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="auto",thumb.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._oldContainer&&(cleanupCaseScrollFeatures(window._oldContainer),window._oldContainer=null),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,window._barbaState.useFadeTransition=!1,clearScrollTriggerState(),safeScrollTriggerRefresh(),barbaLog("fade-transition completed")}}))},{name:"opacity-crossfade",sync:!0,custom:({trigger:trigger})=>isMobileOrTablet()?(barbaLog("Using crossfade transition for mobile/tablet"),!0):window._barbaState.isBackNavigation?(barbaLog("Forcing crossfade transition for back navigation"),!0):window._barbaState.useFadeTransition?(barbaLog("Using crossfade transition for archive navigation"),!0):trigger&&"trans"===trigger.getAttribute("data-barba-link"),beforeLeave:({current:current})=>(barbaLog("opacity-crossfade beforeLeave"),cleanupCaseScrollFeatures(current.container),gsap.killTweensOf(current.container),gsap.set(current.container,{zIndex:1,opacity:1})),leave:({current:current})=>{barbaLog("opacity-crossfade leave");let duration=.6;return isMobileOrTablet()&&(duration=.5),gsap.to(current.container,{opacity:0,duration:duration,ease:"power1.out"})},enter:({next:next})=>{barbaLog("opacity-crossfade enter"),$(next.container).addClass("fixed"),gsap.set(next.container,{zIndex:3,opacity:0}),updateTimezoneTime(),animatePageIntro(next.container,window._barbaState.isSamePageTransition),isMobileOrTablet()&&(addDelayedLoadedClass(next.container,500),splitLinesAnimation(next.container,400)),initCaseSmoothScroll(next.container),initCaseScrollTriggers(next.container),initVisualSlider(next.container),initDropdown(next.container),initHomeSlider(next.container),initNav(next.container),initFieldFillerAnimation(next.container),initArchiveThumb(next.container);let duration=.6;return isMobileOrTablet()&&(duration=.5),gsap.to(next.container,{opacity:1,duration:duration,ease:"power1.out",onComplete:function(){updateCurrentClass(),updatePage(),$(next.container).removeClass("fixed"),syncProjectClass(next.container);const workSlides=next.container.querySelectorAll(".work_slide"),workThumbWraps=next.container.querySelectorAll(".work_thumb_wrap");workSlides.forEach(slide=>{slide.style.pointerEvents="none",slide.style.cursor="default"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="none",thumb.style.cursor="default"}),setTimeout(()=>{workSlides.forEach(slide=>{slide.style.pointerEvents="auto",slide.style.cursor="pointer"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="auto",thumb.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,window._barbaState.isBackNavigation=!1,window._barbaState.useFadeTransition=!1,safeScrollTriggerRefresh(),barbaLog("opacity-crossfade completed")}})}},{name:"instant-transition",sync:!0,custom:({trigger:trigger})=>!isMobileOrTablet()&&(!trigger||"fade"!==trigger.getAttribute("data-barba-link")&&"seamless"!==trigger.getAttribute("data-barba-link")&&"trans"!==trigger.getAttribute("data-barba-link")),beforeLeave:({current:current})=>{barbaLog("instant-transition beforeLeave"),cleanupCaseScrollFeatures(current.container),gsap.killTweensOf(current.container)},enter:({next:next})=>{barbaLog("instant-transition enter"),updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(next.container,window._barbaState.isSamePageTransition),initCaseSmoothScroll(next.container),initCaseScrollTriggers(next.container),initVisualSlider(next.container),initDropdown(next.container),initHomeSlider(next.container),initNav(next.container),initFieldFillerAnimation(next.container),initArchiveThumb(next.container),syncProjectClass(next.container);const workSlides=next.container.querySelectorAll(".work_slide"),workThumbWraps=next.container.querySelectorAll(".work_thumb_wrap");workSlides.forEach(slide=>{slide.style.pointerEvents="none",slide.style.cursor="default"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="none",thumb.style.cursor="default"}),setTimeout(()=>{workSlides.forEach(slide=>{slide.style.pointerEvents="auto",slide.style.cursor="pointer"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="auto",thumb.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},1200),window._barbaState.instantNavInProgress=!1,window._barbaState.isSamePageTransition=!1,safeScrollTriggerRefresh(),barbaLog("instant-transition completed")}}]})}document.addEventListener("click",function(e){const link=e.target.closest('a[data-barba-link="seamless"]');if(!link)return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(link.target&&"_self"!==link.target)return;const currentPath=window.location.pathname,linkPath=new URL(link.href,window.location.origin).pathname;currentPath!==linkPath?(addToNavigationHistory(linkPath),e.preventDefault(),e.stopPropagation(),isMobileOrTablet()?(barbaLog("Using opacity-crossfade for seamless transition on mobile/tablet"),window.barba&&"function"==typeof barba.go?barba.go(link.href,"opacity-crossfade"):window.location.href=link.href):animateLeaveAndGo(link.href)):window._barbaState.isSamePageTransition=!0},!0),document.addEventListener("click",function(e){const link=e.target.closest("a[href]");if(!link)return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(link.target&&"_self"!==link.target)return;const currentPath=window.location.pathname,linkPath=new URL(link.href,window.location.origin).pathname;if(currentPath===linkPath)return e.preventDefault(),e.stopPropagation(),window._barbaState.isSamePageTransition=!0,!1;link.getAttribute("data-barba-link")&&"seamless"===link.getAttribute("data-barba-link")||addToNavigationHistory(linkPath)},!0);