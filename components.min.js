function initHomeSlider(e){if(window.innerWidth<1024)return;const t=e||document,o=Array.from(t.querySelectorAll(".work_thumb_wrap")),a=Array.from(t.querySelectorAll(".work_slide")),n=t.querySelector(".work_thumb_divider");let i=10,r=0,s=!1;function l(){console.log("=== DISABLE ALL THUMBS CALLED ==="),console.log("isClicked was:",s),console.log("activeIndex:",r),console.log("thumbs count:",o.length),console.log("slides count:",a.length),console.log("thumbs array:",o),console.log("slides array:",a),s=!0,o.forEach((e,t)=>{if(t!==r){const t=e.querySelectorAll(".work_thumb a"),o=e.querySelectorAll("a");t.forEach(e=>{e.style.pointerEvents="none"}),o.forEach(e=>{e.style.pointerEvents="none"})}}),a.forEach((e,t)=>{console.log(`Processing slide ${t}, activeIndex: ${r}`),t!==r?(gsap.to(e,{opacity:0,duration:.1,ease:"power2.out",onComplete:()=>{e.style.display="none",console.log(`Slide ${t} display set to none`)}}),console.log(`Slide ${t} made transparent and hidden`)):console.log(`Skipping active slide ${t}`)}),console.log("=== DISABLE ALL THUMBS COMPLETED ==="),barbaLog("All work_thumb_wrap elements disabled after click")}o.length&&a.length&&n&&(a.forEach((e,t)=>{const o=e.querySelector(".work_slide_img");o&&(o.style.opacity=0===t?"1":"0");const a=e.querySelector(".work_slide_info");a&&(a.style.opacity=0===t?"1":"0")}),a[0].style.zIndex=i++,a[0].style.clipPath="inset(0% 0% 0% 0%)",o[0].appendChild(n),o.forEach((e,t)=>{e.addEventListener("mousedown",e=>{console.log(`=== MOUSEDOWN ON THUMB ${t} ===`),console.log("isClicked:",s),e.preventDefault(),e.stopPropagation(),l()}),e.addEventListener("click",e=>{console.log(`=== CLICK ON THUMB ${t} ===`),console.log("isClicked:",s),e.preventDefault(),e.stopPropagation(),l()}),e.addEventListener("mouseenter",()=>{if(s||r===t)return;const e=a[t],l=a[r];"none"===e.style.display&&(e.style.display="",gsap.set(e,{opacity:1})),a.forEach((e,o)=>{e.style.zIndex=o===t?i++:1}),gsap.fromTo(e,{clipPath:"inset(100% 0% 0% 0%)",autoAlpha:1},{clipPath:"inset(0% 0% 0% 0%)",duration:1.4,ease:"expo.out",overwrite:!0});const c=e.querySelector(".work_slide_img");c&&(gsap.set(c,{opacity:1}),gsap.fromTo(c,{scale:1.3},{scale:1,duration:1.2,ease:"expo.out",overwrite:!0}));const p=e.querySelector(".work_slide_info");p&&gsap.fromTo(p,{opacity:0},{opacity:1,duration:.6,delay:.2,ease:"expo.out",overwrite:!0});e.querySelectorAll('[work-slide-component="badge"]').forEach((e,t)=>{gsap.fromTo(e,{opacity:1,y:0},{opacity:1,y:0,duration:1.2,delay:.06*t,ease:"expo.out",overwrite:!0})});const d=Flip.getState(n);if(o[t].appendChild(n),Flip.from(d,{duration:.6,ease:"expo.out"}),r!==t&&l){const e=l.querySelector(".work_slide_img");e&&gsap.to(e,{opacity:0,duration:.9,ease:"expo.out",overwrite:!0});const t=l.querySelector(".work_slide_info");t&&gsap.to(t,{opacity:0,duration:.9,ease:"expo.out",overwrite:!0})}r=t}),e.addEventListener("mouseleave",()=>{s&&r===t||setTimeout(()=>{const e=o.some(e=>e.matches(":hover"));if(r===t)if(e){a[t].style.zIndex=1,gsap.to(a[t],{clipPath:"inset(0% 0% 100% 0%)",duration:1.4,ease:"expo.out",overwrite:!0});const e=a[t].querySelector(".work_slide_img");e&&gsap.to(e,{opacity:0,duration:1,ease:"expo.out",overwrite:!0});const o=a[t].querySelector(".work_slide_info");o&&gsap.to(o,{opacity:0,duration:.4,delay:0,ease:"expo.out",overwrite:!0})}else{const e=0,s=a[e];"none"===s.style.display&&(s.style.display="",gsap.set(s,{opacity:1})),a.forEach((t,o)=>{t.style.zIndex=o===e?i++:1}),gsap.to(s,{clipPath:"inset(0% 0% 0% 0%)",duration:1.4,ease:"expo.out",overwrite:!0});const l=s.querySelector(".work_slide_img");l&&gsap.to(l,{opacity:1,duration:.9,ease:"expo.out",overwrite:!0});const c=s.querySelector(".work_slide_info");if(c&&gsap.to(c,{opacity:1,duration:.9,ease:"expo.out",overwrite:!0}),t!==e){const e=a[t].querySelector(".work_slide_img");e&&gsap.to(e,{opacity:0,duration:.9,ease:"expo.out",overwrite:!0});const o=a[t].querySelector(".work_slide_info");o&&gsap.to(o,{opacity:0,duration:.9,ease:"expo.out",overwrite:!0})}const p=Flip.getState(n);o[e].appendChild(n),Flip.from(p,{duration:.6,ease:"expo.out"}),r=e}},10)})}),a.forEach((e,t)=>{e.addEventListener("mousedown",e=>{console.log(`=== MOUSEDOWN ON SLIDE ${t} ===`),console.log("isClicked:",s),e.preventDefault(),e.stopPropagation(),l()}),e.addEventListener("click",e=>{console.log(`=== CLICK ON SLIDE ${t} ===`),console.log("isClicked:",s),e.preventDefault(),e.stopPropagation(),l()})}))}function initNav(e){if(window.innerWidth<1024)return;const t=e||document,o=t.querySelector(".nav"),a=t.querySelector('[data-nav-reveal="trigger"]'),n=t.querySelector(".menu-bg"),i=t.querySelector(".about_container"),r=t.querySelectorAll('[data-nav-reveal="btn-text"]'),s=t.querySelectorAll('[data-nav-reveal="item"]'),l=t.querySelectorAll('[data-nav-reveal="path"]'),c=t.querySelectorAll('[data-nav-reveal="path-poster"]'),p=t.querySelectorAll('[data-nav-reveal="img"]'),d=t.querySelectorAll(".about-tab"),u=t.querySelectorAll(".about_plane"),g=t.querySelector(".tab_divider"),y=t.querySelector(".about_main-p_wrap");if(!o||!a)return;a._navCleanup&&a._navCleanup(),gsap.set(o,{height:"2.5rem"}),gsap.set(i,{opacity:0}),gsap.set(r,{yPercent:0}),gsap.set(s,{opacity:0}),gsap.set(l,{yPercent:0}),gsap.set(c,{yPercent:130}),gsap.set(p,{opacity:0}),gsap.set(y,{opacity:1}),u.forEach((e,t)=>{e.classList.toggle("is-active",0===t)});let v=!1;function f(){v=!1,gsap.to(i,{opacity:0,duration:.3,ease:"power1.out"}),gsap.to(r,{yPercent:0,duration:.6,ease:"expo.out"}),gsap.to(l,{yPercent:0,from:{yPercent:100},duration:1,delay:.5,stagger:{amount:.15,from:"center"},ease:"expo.out"}),gsap.to(c,{yPercent:130,from:{yPercent:0},duration:.8,stagger:{amount:.12,from:"center"},ease:"expo.in"}),gsap.to(o,{height:"2.5rem",duration:.5,ease:"expo.out"}),gsap.to(s,{opacity:0,duration:.3,ease:"power1.out"}),gsap.to(y,{opacity:1,duration:.3}),n&&n.classList.remove("active")}function m(){v?f():(v=!0,gsap.to(o,{height:"80vh",duration:1.2,ease:"expo.inOut"}),gsap.to(i,{opacity:1,duration:.5,delay:.45,ease:"power2.out"}),gsap.to(r,{yPercent:-100,duration:.8,ease:"expo.out"}),gsap.to(s,{opacity:1,duration:1,delay:.45,stagger:.1,ease:"power1.out"}),gsap.to(l,{yPercent:-100,duration:1,delay:.45,stagger:{amount:.12,from:"center"},ease:"expo.out"}),gsap.to(c,{yPercent:0,from:{yPercent:130},duration:1.8,delay:.45,stagger:{amount:.18,from:"center"},ease:"expo.out"}),gsap.to(p,{opacity:1,duration:.4,delay:.8}),n&&n.classList.add("active"),x(0,!0))}function h(e){v&&!o.contains(e.target)&&f()}function w(e){e.stopPropagation(),m()}function x(e,t=!1){if(u.forEach((t,o)=>{t.classList.toggle("is-active",o===e)}),g&&d[e]){const t=Flip.getState(g);d[e].appendChild(g),Flip.from(t,{duration:.6,ease:"expo.out"})}0===e||t?gsap.to(y,{opacity:1,duration:.3}):gsap.to(y,{opacity:0,duration:.3})}document.addEventListener("click",h),a.addEventListener("click",w),d.forEach((e,t)=>{e.addEventListener("click",function(){x(t)})}),a._navCleanup=function(){document.removeEventListener("click",h),a.removeEventListener("click",w),d.forEach((e,t)=>{e.removeEventListener("click",function(){x(t)})})},barbaLog("Nav initialized",{hasNav:!!o,hasTrigger:!!a,hasAboutTabs:d.length})}function initDropdown(e){if(window.innerWidth<1024)return;const t=e||document,o=t.querySelector(".dropdown_btn"),a=t.querySelector(".dropdown_pop-up"),n=t.querySelector(".dropdown_icon"),i=t.querySelectorAll(".pop-up_item"),r=t.querySelectorAll(".dropdown_visual_img");function s(){a.classList.add("opened"),n.classList.add("opened")}function l(){a.classList.remove("opened"),n.classList.remove("opened")}o&&a&&(o._dropdownCleanup&&o._dropdownCleanup(),o.addEventListener("mouseenter",s),a.addEventListener("mouseenter",s),o.addEventListener("mouseleave",l),a.addEventListener("mouseleave",l),i.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{r.forEach(e=>{gsap.to(e,{opacity:0,duration:0})}),gsap.to(r[t],{opacity:1,duration:0})}),e.addEventListener("mouseleave",()=>{gsap.to(r[t],{opacity:0,duration:.3})})}),o._dropdownCleanup=function(){o.removeEventListener("mouseenter",s),a.removeEventListener("mouseenter",s),o.removeEventListener("mouseleave",l),a.removeEventListener("mouseleave",l),i.forEach((e,t)=>{e.removeEventListener("mouseenter",()=>{}),e.removeEventListener("mouseleave",()=>{})})})}function initVisualSlider(e){if(window.innerWidth<1024)return;const t=e||document,o=$("body",t),a=$(".visual_slider",t),n=a.find(".visual_slider_bg"),i=a.find(".visual_img-wrap.is-slider"),r=$(".visual_imgs_wrapper .visual_img-wrap",t),s=a.find('[slider-cntrl="close"]'),l=a.find('[slider-cntrl="prev"]'),c=a.find('[slider-cntrl="next"]');let p=-1,d=null,u=null,g=null,y=null,v=!1;function f(e){if(a.is(":visible")&&!v)switch(e.key){case"Escape":e.preventDefault(),m();break;case"ArrowLeft":e.preventDefault(),h(p-1,"prev");break;case"ArrowRight":e.preventDefault(),h(p+1,"next")}}function m(){v||(v=!0,$(document).off("keydown.lightbox"),u&&u.css("opacity",1),gsap.to(a,{opacity:0,duration:.3,ease:"expo.out",onComplete:()=>{a.css("display","none").css("opacity",1),i.removeClass("active").css({opacity:0,zIndex:1}),o.removeClass("no-scroll lightbox-open"),gsap.set(n,{opacity:0}),gsap.set([s,l,c],{scale:0}),v=!1,p=-1,d=null,u=null,g=null,y=null}}))}function h(e,t){if(v)return;v=!0;const o=i.length;e<0&&(e=o-1),e>=o&&(e=0);const a=i.eq(p),n=i.eq(e),r=n.find(".visual_img");let s,l,c;i.css({zIndex:1}),n.css({zIndex:3,opacity:1}).addClass("active"),a.css({zIndex:2}),"next"===t?(s="inset(0% 0% 0% 100%)",l="inset(0% 0% 0% 0%)",c=500):(s="inset(0% 100% 0% 0%)",l="inset(0% 0% 0% 0%)",c=-500),gsap.set(n,{clipPath:s}),gsap.set(r,{x:c});const d=gsap.timeline({defaults:{ease:"expo.out"},onComplete:()=>{i.removeClass("active").css({opacity:0,zIndex:1}),n.addClass("active").css({opacity:1,zIndex:2}),gsap.set(n,{clearProps:"clipPath"}),gsap.set(r,{clearProps:"x"}),v=!1,p=e}});d.to(n,{clipPath:l,duration:1.2},0),d.to(r,{x:0,duration:1},0)}r.on("click",function(){!function(e,t){if(v)return;v=!0,p=e,d=t,u=d.find(".visual_img"),g=i.eq(p),y=g.find(".visual_img"),i.removeClass("active").css({opacity:0,zIndex:1}),g.addClass("active").css({opacity:1,zIndex:2}),a.css("display","block"),o.addClass("no-scroll lightbox-open"),$(document).on("keydown.lightbox",f),gsap.fromTo(n,{opacity:0},{opacity:1,duration:.8,ease:"expo.out"}),[s,l,c].forEach(e=>{gsap.fromTo(e,{scale:0},{scale:1,duration:.6,ease:"expo.out"})});const r=function(e,t){const o=e.getBoundingClientRect(),a=t.getBoundingClientRect();return{x:o.left-a.left,y:o.top-a.top,w:o.width,h:o.height}}(d[0],g[0]),m=g.outerWidth(),h=g.outerHeight();u.css("opacity",0),gsap.set(g,{willChange:"transform,width,height,clipPath"}),gsap.fromTo(g,{x:r.x,y:r.y,width:r.w,height:r.h},{x:0,y:0,width:m,height:h,duration:1.2,ease:"expo.out",onComplete:()=>{gsap.set(g,{clearProps:"transform,width,height,willChange"}),v=!1}});const w=g.find('[slide-info="title"]');gsap.fromTo(w,{opacity:0},{opacity:1,duration:.8,ease:"expo.in"})}($(this).index(),$(this))}),s.on("click",function(e){e.stopPropagation(),m()}),c.on("click",function(e){e.stopPropagation(),h(p+1,"next")}),l.on("click",function(e){e.stopPropagation(),h(p-1,"prev")})}function initArchiveThumb(e){if(window.innerWidth<1024)return;const t=e||document,o=t.querySelectorAll(".archive_thumb"),a=t.querySelectorAll('[data-hover="archive"]');if(!o.length||!a.length)return;const n=Array.from(a).map(e=>e.textContent.trim());o.forEach(e=>{e.addEventListener("mouseenter",()=>{a.forEach(e=>{e.textContent="Аrchive",gsap.fromTo(e,{opacity:0,yPercent:110},{opacity:1,yPercent:0,duration:.7,ease:"expo.out"})})}),e.addEventListener("mouseleave",()=>{a.forEach((e,t)=>{gsap.to(e,{opacity:0,yPercent:110,duration:.3,ease:"expo.in",onComplete:()=>{e.textContent=n[t],gsap.fromTo(e,{opacity:0,yPercent:110},{opacity:1,yPercent:0,duration:.5,ease:"expo.out"})}})})})}),barbaLog("Archive thumb initialized",{thumbsCount:o.length,textElsCount:a.length})}
