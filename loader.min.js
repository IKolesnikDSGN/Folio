function initFirstLoadAnimation(container){const root=container||document,loaderContainer=root.querySelector(".loader_container"),loaderDivider=root.querySelector(".loader_divider");return loaderContainer&&loaderDivider?(barbaLog("Starting first load animation with real loading"),new Promise(resolve=>{let isResolved=!1;function completeAnimation(){isResolved||(isResolved=!0,barbaLog("Loader animation completed"),resolve())}loaderContainer.style.display="flex",gsap.set(loaderDivider,{height:"0%"}),loadResourcesWithProgress(loaderDivider).then(()=>{barbaLog("All resources loaded, adding loaded class to divider-wrap");const loaderDividerWrap=root.querySelector(".loader_divider-wrap");loaderDividerWrap&&(loaderDividerWrap.classList.add("loaded"),barbaLog("Loaded class added to divider-wrap")),setTimeout(()=>{barbaLog("Starting fade out after delay"),gsap.to(loaderContainer,{opacity:0,duration:.3,ease:"power1.inOut",onComplete:()=>{loaderContainer.style.display="none",barbaLog("Loader hidden")}}),startPageAnimations(root),completeAnimation()},500)}).catch(error=>{barbaLog("Error in loadResourcesWithProgress, forcing completion",{error:error}),completeAnimation()}),setTimeout(()=>{isResolved||(barbaLog("Loader animation timeout, forcing completion"),completeAnimation())},1e4)})):(barbaLog("Loader elements not found, skipping first load animation"),Promise.resolve())}function startPageAnimations(container){const root=container||document;return barbaLog("Starting page animations"),new Promise(resolve=>{updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(root),initCaseSmoothScroll(root),initCaseScrollTriggers(root),initVisualSlider(root),initDropdown(root),initHomeSlider(root),initNav(root),initFieldFillerAnimation(root),initArchiveThumb(root),syncProjectClass(root),window.ScrollTrigger&&(safeScrollTriggerRefresh(),setTimeout(()=>{safeScrollTriggerRefresh()},100)),setTimeout(()=>{resolve()},2e3)})}function loadResourcesWithProgress(progressElement){return new Promise(resolve=>{Date.now();let loadedResources=0,totalResources=0,progress=0,isCompleted=!1;function updateProgress(){progress=loadedResources/totalResources*100,gsap.to(progressElement,{height:`${Math.min(progress,100)}%`,duration:.3,ease:"power2.out"}),loadedResources>=totalResources&&!isCompleted&&completeLoading()}function completeLoading(){isCompleted||(isCompleted=!0,barbaLog("All resources loaded, ensuring 100% progress"),gsap.to(progressElement,{height:"100%",duration:.3,ease:"power2.out",onComplete:()=>{setTimeout(()=>{resolve()},200)}}))}const images=document.querySelectorAll("img");totalResources+=images.length,images.forEach(img=>{img.complete?(loadedResources++,updateProgress()):(img.addEventListener("load",()=>{loadedResources++,updateProgress()}),img.addEventListener("error",()=>{loadedResources++,updateProgress()}))}),document.fonts&&document.fonts.ready&&(totalResources++,document.fonts.ready.then(()=>{loadedResources++,updateProgress()}));const cssLinks=document.querySelectorAll('link[rel="stylesheet"]');totalResources+=cssLinks.length,cssLinks.forEach(link=>{link.sheet?(loadedResources++,updateProgress()):(link.addEventListener("load",()=>{loadedResources++,updateProgress()}),link.addEventListener("error",()=>{loadedResources++,updateProgress()}))});const jsScripts=document.querySelectorAll("script[src]");if(totalResources+=jsScripts.length,jsScripts.forEach(script=>{"complete"===script.readyState||"loaded"===script.readyState?(loadedResources++,updateProgress()):(script.addEventListener("load",()=>{loadedResources++,updateProgress()}),script.addEventListener("error",()=>{loadedResources++,updateProgress()}))}),0===totalResources)return barbaLog("No resources to load, completing immediately"),void setTimeout(()=>{completeLoading()},100);setTimeout(()=>{isCompleted||(barbaLog("Minimum load time reached, forcing completion"),loadedResources=totalResources,completeLoading())},2500),setTimeout(()=>{isCompleted||(barbaLog("Loading timeout reached, forcing completion"),loadedResources=totalResources,completeLoading())},8e3),"complete"===document.readyState?setTimeout(()=>{isCompleted||(barbaLog("Document ready state complete, forcing completion"),loadedResources=totalResources,completeLoading())},100):window.addEventListener("load",()=>{setTimeout(()=>{isCompleted||(barbaLog("Window load event fired, forcing completion"),loadedResources=totalResources,completeLoading())},100)})})}function initializePage(container){const initialContainer=container||document.querySelector('[data-barba="container"]')||document,workSlides=initialContainer.querySelectorAll(".work_slide"),workThumbWraps=initialContainer.querySelectorAll(".work_thumb_wrap");workSlides.forEach(slide=>{slide.style.pointerEvents="none",slide.style.cursor="default"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="none",thumb.style.cursor="default"}),setTimeout(()=>{workSlides.forEach(slide=>{slide.style.pointerEvents="auto",slide.style.cursor="pointer"}),workThumbWraps.forEach(thumb=>{thumb.style.pointerEvents="auto",thumb.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},900),updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(initialContainer),initCaseSmoothScroll(initialContainer),initCaseScrollTriggers(initialContainer),initVisualSlider(initialContainer),initDropdown(initialContainer),initHomeSlider(initialContainer),initNav(initialContainer),initFieldFillerAnimation(initialContainer),initArchiveThumb(initialContainer),syncProjectClass(initialContainer),window.ScrollTrigger&&(safeScrollTriggerRefresh(),setTimeout(()=>{safeScrollTriggerRefresh()},100)),barbaLog("Page initialization completed successfully")}$(function(){barbaLog("Initial page load started");try{const initialContainer=document.querySelector('[data-barba="container"]')||document;initBackButtonHandler();const isFirstLoad=!sessionStorage.getItem("pageLoaded"),isPageReload=performance.navigation&&1===performance.navigation.type,isManualReload=performance.navigation&&1===performance.navigation.type,isHardReload="reload"===performance.getEntriesByType("navigation")[0]?.type;isFirstLoad||isPageReload||isManualReload||isHardReload?(barbaLog("First load or page reload detected, starting loader animation",{isFirstLoad:isFirstLoad,isPageReload:isPageReload,isManualReload:isManualReload,isHardReload:isHardReload,navigationType:performance.navigation?.type}),initFirstLoadAnimation(initialContainer).then(()=>{initializePage(initialContainer)})):(barbaLog("Regular page load, skipping loader animation"),initializePage(initialContainer)),sessionStorage.setItem("pageLoaded","true")}catch(error){console.error("[Barba] Error during initial page load:",error),barbaLog("Initial page load failed",{error:error.message})}});