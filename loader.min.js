function initFirstLoadAnimation(e){const o=e||document,t=o.querySelector(".loader_container"),a=o.querySelector(".loader_divider");return t&&a?(barbaLog("Starting first load animation with real loading"),new Promise(e=>{let r=!1;function i(){r||(r=!0,barbaLog("Loader animation completed"),e())}t.style.display="flex",gsap.set(a,{height:"0%"}),loadResourcesWithProgress(a).then(()=>{barbaLog("All resources loaded, adding loaded class to divider-wrap");const e=o.querySelector(".loader_divider-wrap");e&&(e.classList.add("loaded"),barbaLog("Loaded class added to divider-wrap")),setTimeout(()=>{barbaLog("Starting fade out after delay"),gsap.to(t,{opacity:0,duration:.3,ease:"power1.inOut",onComplete:()=>{t.style.display="none",barbaLog("Loader hidden")}}),startPageAnimations(o),i()},500)}).catch(e=>{barbaLog("Error in loadResourcesWithProgress, forcing completion",{error:e}),i()}),setTimeout(()=>{r||(barbaLog("Loader animation timeout, forcing completion"),i())},1e4)})):(barbaLog("Loader elements not found, skipping first load animation"),Promise.resolve())}function startPageAnimations(e){const o=e||document;return barbaLog("Starting page animations"),new Promise(e=>{updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(o),initCaseSmoothScroll(o),initCaseScrollTriggers(o),initVisualSlider(o),initDropdown(o),initHomeSlider(o),initNav(o),initFieldFillerAnimation(o),initArchiveThumb(o),syncProjectClass(o),window.ScrollTrigger&&(safeScrollTriggerRefresh(),setTimeout(()=>{safeScrollTriggerRefresh()},100)),setTimeout(()=>{e()},2e3)})}function loadResourcesWithProgress(e){return new Promise(o=>{Date.now();let t=0,a=0,r=0,i=!1;function n(){r=t/a*100,gsap.to(e,{height:`${Math.min(r,100)}%`,duration:.3,ease:"power2.out"}),t>=a&&!i&&s()}function s(){i||(i=!0,barbaLog("All resources loaded, ensuring 100% progress"),gsap.to(e,{height:"100%",duration:.3,ease:"power2.out",onComplete:()=>{setTimeout(()=>{o()},200)}}))}const l=document.querySelectorAll("img");a+=l.length,l.forEach(e=>{e.complete?(t++,n()):(e.addEventListener("load",()=>{t++,n()}),e.addEventListener("error",()=>{t++,n()}))}),document.fonts&&document.fonts.ready&&(a++,document.fonts.ready.then(()=>{t++,n()}));const d=document.querySelectorAll('link[rel="stylesheet"]');a+=d.length,d.forEach(e=>{e.sheet?(t++,n()):(e.addEventListener("load",()=>{t++,n()}),e.addEventListener("error",()=>{t++,n()}))});const c=document.querySelectorAll("script[src]");if(a+=c.length,c.forEach(e=>{"complete"===e.readyState||"loaded"===e.readyState?(t++,n()):(e.addEventListener("load",()=>{t++,n()}),e.addEventListener("error",()=>{t++,n()}))}),0===a)return barbaLog("No resources to load, completing immediately"),void setTimeout(()=>{s()},100);setTimeout(()=>{i||(barbaLog("Minimum load time reached, forcing completion"),t=a,s())},2500),setTimeout(()=>{i||(barbaLog("Loading timeout reached, forcing completion"),t=a,s())},8e3),"complete"===document.readyState?setTimeout(()=>{i||(barbaLog("Document ready state complete, forcing completion"),t=a,s())},100):window.addEventListener("load",()=>{setTimeout(()=>{i||(barbaLog("Window load event fired, forcing completion"),t=a,s())},100)})})}function initializePage(e){const o=e||document.querySelector('[data-barba="container"]')||document,t=o.querySelectorAll(".work_slide"),a=o.querySelectorAll(".work_thumb_wrap");t.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),a.forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default"}),setTimeout(()=>{t.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),a.forEach(e=>{e.style.pointerEvents="auto",e.style.cursor="pointer"}),barbaLog("Work slides and thumb wraps are now clickable")},900),updateCurrentClass(),updatePage(),updateTimezoneTime(),animatePageIntro(o),initCaseSmoothScroll(o),initCaseScrollTriggers(o),initVisualSlider(o),initDropdown(o),initHomeSlider(o),initNav(o),initFieldFillerAnimation(o),initArchiveThumb(o),syncProjectClass(o),window.ScrollTrigger&&(safeScrollTriggerRefresh(),setTimeout(()=>{safeScrollTriggerRefresh()},100)),barbaLog("Page initialization completed successfully")}$(function(){barbaLog("Initial page load started");try{const e=document.querySelector('[data-barba="container"]')||document;initBackButtonHandler();const o=!sessionStorage.getItem("pageLoaded"),t=performance.navigation&&1===performance.navigation.type,a=performance.navigation&&1===performance.navigation.type,r="reload"===performance.getEntriesByType("navigation")[0]?.type;o||t||a||r?(barbaLog("First load or page reload detected, starting loader animation",{isFirstLoad:o,isPageReload:t,isManualReload:a,isHardReload:r,navigationType:performance.navigation?.type}),initFirstLoadAnimation(e).then(()=>{initializePage(e)})):(barbaLog("Regular page load, skipping loader animation"),initializePage(e)),sessionStorage.setItem("pageLoaded","true")}catch(e){console.error("[Barba] Error during initial page load:",e),barbaLog("Initial page load failed",{error:e.message})}});
