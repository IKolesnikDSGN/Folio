function updateTimezoneTime(){const timezoneSpan=document.querySelector(".timezone_span");function formatTime(){const now=new Date,gmtPlus3=new Date(now.getTime()+108e5);return`${gmtPlus3.getUTCHours().toString().padStart(2,"0")} : ${gmtPlus3.getUTCMinutes().toString().padStart(2,"0")}`}timezoneSpan&&(timezoneSpan.textContent=formatTime(),setInterval(()=>{timezoneSpan.textContent=formatTime()},6e4))}function barbaLog(message,data=null){window._barbaState.debug&&console.log(`[Barba] ${message}`,data)}function addToNavigationHistory(url){const currentPath=window.location.pathname;currentPath!==url&&(window._barbaState.navigationHistory.push(currentPath),window._barbaState.navigationHistory.length>10&&window._barbaState.navigationHistory.shift(),barbaLog("Added to navigation history",{url:url,history:window._barbaState.navigationHistory}))}function isBackNavigation(targetUrl){const history=window._barbaState.navigationHistory,isBack=history.includes(targetUrl);return barbaLog("Checking back navigation",{targetUrl:targetUrl,isBack:isBack,history:history}),isBack}function initBackButtonHandler(){window.addEventListener("popstate",function(event){barbaLog("Popstate event detected",{state:event.state,currentPath:window.location.pathname}),window._barbaState.isBackNavigation=!0,window.barba&&"function"==typeof barba.go?(barbaLog("Triggering crossfade transition for back navigation"),barba.go(window.location.href,"opacity-crossfade")):window.location.reload()}),barbaLog("Back button handler initialized")}function updateCurrentClass(){$(".page_link").removeClass("w--current"),$(".page_link").each(function(){$(this).attr("href")===window.location.pathname&&$(this).addClass("w--current")})}function updatePage(){$(window).scrollTop(0)}function syncProjectClass(scope){const projectElement=(scope||document).querySelector("[data-project-class]");if(!projectElement)return void barbaLog("No project-class element found");const projectClass=projectElement.getAttribute("data-project-class"),projectWrapper=document.querySelector(".project-wrapper");projectWrapper?(barbaLog("Syncing project class",{currentClasses:projectWrapper.className,newClass:projectClass}),projectWrapper.classList.remove("show","hide"),"show"!==projectClass&&"hide"!==projectClass||(projectWrapper.classList.add(projectClass),barbaLog("Project wrapper class updated",{newClasses:projectWrapper.className}))):barbaLog("Project wrapper not found")}function isMobileOrTablet(){return(window.innerWidth||document.documentElement.clientWidth)<1024}function safeScrollTriggerRefresh(){if(window.ScrollTrigger)try{ScrollTrigger.refresh(),barbaLog("ScrollTrigger refreshed successfully")}catch(error){console.error("[Barba] ScrollTrigger refresh error:",error)}}window.gsap&&window.ScrollTrigger&&gsap.registerPlugin(ScrollTrigger),window._barbaState={isSamePageTransition:!1,instantNavInProgress:!1,currentTransition:null,debug:!1,isBackNavigation:!1,navigationHistory:[]},window.toggleBarbaDebug=function(){return window._barbaState.debug=!window._barbaState.debug,console.log("[Barba] Debug mode "+(window._barbaState.debug?"enabled":"disabled")),window._barbaState.debug},window.resetBarbaState=function(){window._barbaState.isSamePageTransition=!1,window._barbaState.instantNavInProgress=!1,window._barbaState.currentTransition=null,window._barbaState.isBackNavigation=!1,window._barbaState.navigationHistory=[],console.log("[Barba] State reset")},window.findBarbaLinks=function(){const allLinks=document.querySelectorAll("a[data-barba-link]"),projectWrapperLinks=document.querySelectorAll(".project-wrapper a[data-barba-link]"),visibleProjectLinks=Array.from(projectWrapperLinks).filter(link=>{const wrapper=link.closest(".project-wrapper");return wrapper&&!wrapper.classList.contains("hide")&&"none"!==wrapper.style.display&&"hidden"!==wrapper.style.visibility});return console.log("[Barba] Found links:",{total:allLinks.length,inProjectWrapper:projectWrapperLinks.length,visibleInProjectWrapper:visibleProjectLinks.length,projectWrapperState:document.querySelector(".project-wrapper")?.className||"not found"}),{all:allLinks,inProjectWrapper:projectWrapperLinks,visibleInProjectWrapper:visibleProjectLinks}};
